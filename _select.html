
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>Cosplay Tailors</title>
<link href="css/reset.css" rel="stylesheet" type="text/css">
<link href="css/style.css" rel="stylesheet" type="text/css">
<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery.cookie.js"></script>
<script src="js/jquery-ui-1.10.4.custom.min.js" type="text/javascript"></script>

<script src="js/jquery.ui.touch-punch.js" type="text/javascript"></script>
  <script>
  $(function() {
    var dragId;
    var imageHead = false,
        imageUp = false,
        imageUnder = false;
    $( ".draggable" ).draggable({
	  snap:".ui-widget-header",
	  revert: "invalid" ,
      cursorAt: { top: 5, left: 5 },
      helper: function( event ) {
        dragId = $(this).attr('id');
        // console.log(dragId);
        return $( "<div class='ui-widget-header av_box2'><div class='av_in2'><img src='img/"+$(this).attr('id')+".png' /></div></div>" );
      }
    });
	
	
	$( "#snaptarget1" ).droppable({
      drop: function( event, ui ) {
        $( "#snaptarget1_img" )
          .attr( "src","img/"+dragId+"_head.png" )
		  .css( "visibility","visible" );
		imageHead = dragId;
		isNext();
		
		 $( "#dialog" ).dialog({
			 modal: true,
			 draggable: false,
			 closeOnEscape: false,
			 resizable: false,
			 open:function(event, ui){
				 $(".ui-dialog-titlebar-close").hide();
				}}).html("<img onClick='headColor(this);' id='"+dragId+"' src='img/"+dragId+"_head.png' width='25%'/><img onClick='headColor(this);' id='"+dragId+"02' src='img/"+dragId+"02_head.png' width='25%'/><img onClick='headColor(this);' id='"+dragId+"03' src='img/"+dragId+"03_head.png' width='25%'/><img onClick='headColor(this);' id='"+dragId+"04' src='img/"+dragId+"04_head.png' width='25%'/><img onClick='headColor(this);' id='"+dragId+"05' src='img/"+dragId+"05_head.png' width='25%'/><img onClick='headColor(this);' id='"+dragId+"06' src='img/"+dragId+"06_head.png' width='25%'/><img onClick='headColor(this);' id='"+dragId+"07' src='img/"+dragId+"07_head.png' width='25%'/><img onClick='headColor(this);' id='"+dragId+"08' src='img/"+dragId+"08_head.png' width='25%'/>"); 
		 }});
	
	$( "#snaptarget2" ).droppable({
      drop: function( event, ui ) {
        $( "#snaptarget2_img" )
          .attr( "src","img/"+dragId+"_up.png" )
		  .css( "visibility","visible" );
		imageUp = dragId;
		isNext();
		 $( "#dialog" ).dialog({
			 modal: true,
			 draggable: false,
			 closeOnEscape: false,
			 resizable: false,
			 open:function(event, ui){
				 $(".ui-dialog-titlebar-close").hide();
				}}).html("<img onClick='upColor(this);' id='"+dragId+"' src='img/"+dragId+"_up.png' width='25%'/><img onClick='upColor(this);' id='"+dragId+"02' src='img/"+dragId+"02_up.png' width='25%'/><img onClick='upColor(this);' id='"+dragId+"03' src='img/"+dragId+"03_up.png' width='25%'/><img onClick='upColor(this);' id='"+dragId+"04' src='img/"+dragId+"04_up.png' width='25%'/><img onClick='upColor(this);' id='"+dragId+"05' src='img/"+dragId+"05_up.png' width='25%'/><img onClick='upColor(this);' id='"+dragId+"06' src='img/"+dragId+"06_up.png' width='25%'/><img onClick='upColor(this);' id='"+dragId+"07' src='img/"+dragId+"07_up.png' width='25%'/><img onClick='upColor(this);' id='"+dragId+"08' src='img/"+dragId+"08_up.png' width='25%'/>");
      }
    });
	
	$( "#snaptarget3" ).droppable({
      drop: function( event, ui ) {
        $( "#snaptarget3_img" )
          .attr( "src","img/"+dragId+"_under.png" )
		  .css( "visibility","visible" );
		imageUnder = dragId;
		isNext();
		 $( "#dialog" ).dialog({
			 modal: true,
			 draggable: false,
			 closeOnEscape: false,
			 resizable: false,
			 open:function(event, ui){
				 $(".ui-dialog-titlebar-close").hide();
				}}).html("<img onClick='underColor(this);' id='"+dragId+"' src='img/"+dragId+"_under.png' width='25%'/><img onClick='underColor(this);' id='"+dragId+"02' src='img/"+dragId+"02_under.png' width='25%'/><img onClick='underColor(this);' id='"+dragId+"03' src='img/"+dragId+"03_under.png' width='25%'/><img onClick='underColor(this);' id='"+dragId+"04' src='img/"+dragId+"04_under.png' width='25%'/><img onClick='underColor(this);' id='"+dragId+"05' src='img/"+dragId+"05_under.png' width='25%'/><img onClick='underColor(this);' id='"+dragId+"06' src='img/"+dragId+"06_under.png' width='25%'/><img onClick='underColor(this);' id='"+dragId+"07' src='img/"+dragId+"07_under.png' width='25%'/><img onClick='underColor(this);' id='"+dragId+"08' src='img/"+dragId+"08_under.png' width='25%'/>");
      }
    });
    
    function isNext(){
        // ３つのパーツが選択されたら
        if( !! imageHead == true &&  !! imageUp == true &&  !! imageUnder == true){
            $(".dash-btn").removeClass('dash-btn-disabled');
        }else{
            $(".dash-btn").addClass('dash-btn-disabled');
        }
    }
    
    $("#next-btn-start").click(function(){
        if($(".dash-btn").hasClass('dash-btn-disabled') === false){
            $.cookie('costumeHead', imageHead);
            $.cookie('costumeUp', imageUp);
            $.cookie('costumeUnder', imageUnder);
           if($.cookie('position') == 'btn2') {
                window.location.href = 'end.html';
           }else if($.cookie('position') == 'btn3') {
    			window.location.href = 'orientation.html';
           }
        }
    });
	
	
  });
  
	function headColor(imgId){
	  	var id=imgId.id;
		$( "#snaptarget1_img" ).attr( "src","img/"+id+"_head.png" );
		$("#dialog").dialog("close");
	};
	function upColor(imgId){
	  	var id=imgId.id;
		$( "#snaptarget2_img" ).attr( "src","img/"+id+"_up.png" );
		$("#dialog").dialog("close");
	};
	function underColor(imgId){
	  	var id=imgId.id;
		$( "#snaptarget3_img" ).attr( "src","img/"+id+"_under.png" );
		$("#dialog").dialog("close");
	};
  </script>
<style>
.ui-dialog-titlebar{
	background: rgba(255,250,155,0.95);
	border-radius: 10px 10px 0 0;
	padding: 5px 0;
	text-align:center;
	font-family: 'MyFont';
}
.ui-dialog-content{
	border-radius: 0 0 10px 10px;
	background: rgba(255,255,250,0.95);
}
</style>
</head>

<body>
<div id="wrap">
    <div id="main">
        <header>
        	<h1><img src="img/head.png" /></h1>
        </header>
        <div id="box_wrap">
            <div id="left_box">
                <img src="img/char_woman.png"  id="snaptarget" />
                
                <img id="snaptarget1_img" />
                <img id="snaptarget2_img" />
                <img id="snaptarget3_img" />
                
                <img src="img/char1.png"  id="snaptarget1" class="ui-widget-header" />
                <img src="img/char2.png"  id="snaptarget2" class="ui-widget-header" />
                <img src="img/char3.png"  id="snaptarget3" class="ui-widget-header" />
                
            </div><!-- #left_box -->
            
            <div id="right_box">
            
                <div class="av_box draggable" id="majo">
                    <div class="av_in ui-widget-content">
                        <img src="img/majo.png"  />
                    </div><!-- .av_in -->
                </div><!-- .av_box -->
                
                <div id="dialog" title="色を選んでください"></div>
                
                <div class="av_box draggable" id="char_woman">
                    <div class="av_in ui-widget-content">
                        <img src="img/char_woman.png"  />
                    </div><!-- .av_in -->
                </div><!-- .av_box -->
                <div class="av_box draggable" id="santa">
                    <div class="av_in ui-widget-content">
                        <img src="img/santa.png"  />
                    </div><!-- .av_in -->
                </div><!-- .av_box -->
                <div class="av_box draggable">
                    <div class="av_in ui-widget-content">
                        <img src="img/majo.png"  />
                    </div><!-- .av_in -->

            </div><!-- #right_box -->
        </div><!-- #box_wrap -->
            
        <div id="box_bot">
        	<span id="next-btn-start" class="dash-btn dash-btn-disabled" style="margin-top: 20px;"><img src="img/next_btn.png" /></span>
        </div><!-- #box_bot -->
    
    </div><!-- #main -->
</div><!-- #wrap -->
</body>
</html>
